#!/usr/bin/env bash
DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )"/.. >/dev/null && pwd )"
set -a
source $DIR/conf/.env

if [ -z $1 ]; then
    echo "Disabling xdebug...";
    docker exec -u root ${MAGENTO_CONTAINER} phpdismod xdebug
else
    echo "Enabling xdebug...";
    docker exec -u root ${MAGENTO_CONTAINER} sh -c "echo 'xdebug.remote_enable=1' > /usr/local/etc/php/conf.d/zdebug.ini"
    docker exec -u root ${MAGENTO_CONTAINER} sh -c "echo 'xdebug.remote_autostart=1' >> /usr/local/etc/php/conf.d/zdebug.ini"
    docker exec -u root ${MAGENTO_CONTAINER} sh -c "echo 'xdebug.remote_host=${CURRENT_IP}' >> /usr/local/etc/php/conf.d/zdebug.ini"
    docker exec -u root ${MAGENTO_CONTAINER} sh -c "echo 'xdebug.idekey=PHPSTORM' >> /usr/local/etc/php/conf.d/zdebug.ini"
fi;
